<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Data transformation | Analyzing emotions towards Elon Musk on Twitter</title>
  <meta name="description" content="Chapter 3 Data transformation | Analyzing emotions towards Elon Musk on Twitter" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Data transformation | Analyzing emotions towards Elon Musk on Twitter" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Data transformation | Analyzing emotions towards Elon Musk on Twitter" />
  
  
  

<meta name="author" content="Anni Chen, Zehui Wu, Senqi Zhang" />


<meta name="date" content="2021-12-11" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-sources.html"/>
<link rel="next" href="missing-values.html"/>
<script src="libs/header-attrs-2.10/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>




<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Elon Musk on Twitter</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="data-sources.html"><a href="data-sources.html"><i class="fa fa-check"></i><b>2</b> Data sources</a>
<ul>
<li class="chapter" data-level="2.1" data-path="data-sources.html"><a href="data-sources.html#dataset-overview"><i class="fa fa-check"></i><b>2.1</b> Dataset overview</a></li>
<li class="chapter" data-level="2.2" data-path="data-sources.html"><a href="data-sources.html#limitations"><i class="fa fa-check"></i><b>2.2</b> Limitations</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-transformation.html"><a href="data-transformation.html"><i class="fa fa-check"></i><b>3</b> Data transformation</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-transformation.html"><a href="data-transformation.html#feature-selection"><i class="fa fa-check"></i><b>3.1</b> Feature Selection</a></li>
<li class="chapter" data-level="3.2" data-path="data-transformation.html"><a href="data-transformation.html#tokenization"><i class="fa fa-check"></i><b>3.2</b> Tokenization</a></li>
<li class="chapter" data-level="3.3" data-path="data-transformation.html"><a href="data-transformation.html#sentiment"><i class="fa fa-check"></i><b>3.3</b> Sentiment</a></li>
<li class="chapter" data-level="3.4" data-path="data-transformation.html"><a href="data-transformation.html#summary-of-added-features"><i class="fa fa-check"></i><b>3.4</b> Summary of added features</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="missing-values.html"><a href="missing-values.html"><i class="fa fa-check"></i><b>4</b> Missing values</a>
<ul>
<li class="chapter" data-level="4.1" data-path="missing-values.html"><a href="missing-values.html#twitter-dataset"><i class="fa fa-check"></i><b>4.1</b> Twitter Dataset</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>5</b> Results</a>
<ul>
<li class="chapter" data-level="5.1" data-path="results.html"><a href="results.html#elon-musk"><i class="fa fa-check"></i><b>5.1</b> Elon Musk</a></li>
<li class="chapter" data-level="5.2" data-path="results.html"><a href="results.html#volume-of-tweets"><i class="fa fa-check"></i><b>5.2</b> Volume of tweets</a></li>
<li class="chapter" data-level="5.3" data-path="results.html"><a href="results.html#geological-distribution"><i class="fa fa-check"></i><b>5.3</b> Geological Distribution</a></li>
<li class="chapter" data-level="5.4" data-path="results.html"><a href="results.html#tweet-contents"><i class="fa fa-check"></i><b>5.4</b> Tweet Contents</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="results.html"><a href="results.html#word-frequency"><i class="fa fa-check"></i><b>5.4.1</b> Word Frequency</a></li>
<li class="chapter" data-level="5.4.2" data-path="results.html"><a href="results.html#tweet-sentiment"><i class="fa fa-check"></i><b>5.4.2</b> Tweet sentiment</a></li>
<li class="chapter" data-level="5.4.3" data-path="results.html"><a href="results.html#monitoring-topics"><i class="fa fa-check"></i><b>5.4.3</b> Monitoring Topics</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="interactive-component.html"><a href="interactive-component.html"><i class="fa fa-check"></i><b>6</b> Interactive component</a></li>
<li class="chapter" data-level="7" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>7</b> Conclusion</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Analyzing emotions towards Elon Musk on Twitter</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-transformation" class="section level1" number="3">
<h1><span class="header-section-number">Chapter 3</span> Data transformation</h1>
<div id="feature-selection" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Feature Selection</h2>
<p>There are 35 features in the data set and more sub-features within a feature. After careful consideration, we chose 7 features to construct our data set for analysis. The following is a table describing all selected variables.</p>
<table>
<caption><span id="tab:unnamed-chunk-9">Table 3.1: </span>Feature Overview</caption>
<thead>
<tr class="header">
<th align="left">Features</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">created_at</td>
<td align="left">creation time of tweet</td>
</tr>
<tr class="even">
<td align="left">id_str</td>
<td align="left">tweet id</td>
</tr>
<tr class="odd">
<td align="left">text</td>
<td align="left">truncated tweet of length&lt;140</td>
</tr>
<tr class="even">
<td align="left">user_id</td>
<td align="left">user id</td>
</tr>
<tr class="odd">
<td align="left">followers_count</td>
<td align="left">number of followers of user</td>
</tr>
<tr class="even">
<td align="left">location</td>
<td align="left">location of tweet</td>
</tr>
<tr class="odd">
<td align="left">full_text</td>
<td align="left">full text of tweet</td>
</tr>
</tbody>
</table>
<p>Of the 7 features, <code>user_id</code> and <code>follower_count</code> are sub-features from <code>user</code>. They captures the id and the number of followers of a user respectively. <code>location</code> is a sub-feature from <code>place</code>. It is a user-identified location, which they can put anything on it. <code>full_text</code> is a sub-feature from <code>extended tweet</code>. It captures tweets that has over 140 characters. We did not keep the feature <code>geo</code> as we found out that it has a missing percentage of almost 100 percent. It will show up in the missing value section to support out decision.</p>
<p>After selecting our basic features, we notice that texts are stored in two different features. If the tweet is longer than 140 characters, the tweet would be truncated and put into <code>text</code>. The original tweet would be put into <code>full_text</code>.To make our analysis more convenient, we add a new variable called <code>original_text</code> to store the tweets</p>
</div>
<div id="tokenization" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Tokenization</h2>
<p>Next, we conduct tokenization. This a process that will help us with other natural langauge processing analysis. Since there are some special characters like hashtag and usernames that might otherwise be stripped away using other tokenizer, we use the specific tokenize_tweets() function from the tokenizers library. Below is a demonstration for how it tokenizes one of the tweets.</p>
<pre><code>## [1] &quot;@AGlobalCitizen @AlexanderBruyns @PPathole @elonmusk @SpaceX We would also somehow need to create some sort of artificial magnetic field around the entire planet to make sure that any biomass we take there isn&#39;t immediately destroyed by cosmic radiation&quot;</code></pre>
<pre><code>## [[1]]
##  [1] &quot;@AGlobalCitizen&quot;  &quot;@AlexanderBruyns&quot; &quot;@PPathole&quot;        &quot;@elonmusk&quot;       
##  [5] &quot;@SpaceX&quot;          &quot;we&quot;               &quot;would&quot;            &quot;also&quot;            
##  [9] &quot;somehow&quot;          &quot;need&quot;             &quot;to&quot;               &quot;create&quot;          
## [13] &quot;some&quot;             &quot;sort&quot;             &quot;of&quot;               &quot;artificial&quot;      
## [17] &quot;magnetic&quot;         &quot;field&quot;            &quot;around&quot;           &quot;the&quot;             
## [21] &quot;entire&quot;           &quot;planet&quot;           &quot;to&quot;               &quot;make&quot;            
## [25] &quot;sure&quot;             &quot;that&quot;             &quot;any&quot;              &quot;biomass&quot;         
## [29] &quot;we&quot;               &quot;take&quot;             &quot;there&quot;            &quot;isnt&quot;            
## [33] &quot;immediately&quot;      &quot;destroyed&quot;        &quot;by&quot;               &quot;cosmic&quot;          
## [37] &quot;radiation&quot;</code></pre>
<p>We then add <code>word_tokens</code> as a feature to our dataset.</p>
</div>
<div id="sentiment" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> Sentiment</h2>
<p>Tweets have sentiments and here we try to classify a tweet as positive, negative or netural.</p>
<p>Before extracting sentiments from the tweets, we need to firstly clean the text such that it does not contain any special characters such as hashtags, “",”@", website links, etc. Some special character might affect the accuracy of the sentiment score.</p>
<p>Below is a comparison between original text and the cleaned text. Typically “@” and website links are removed. After cleaning all the tweets, they were stored in a new feature <code>cleaned_text</code> in our dataset.</p>
<pre><code>## [1] &quot;@elonmusk @ElemonGame Great ❤️❤️❤️ @Corsair will help @Elemongame the first blockchain game ever owns hundred millions users. This is far beyond my imagination. To the Moon and Mars. @ElemonGame @CORSAIR #Elemon #Corsair love ❤️❤️❤️🚀🚀🚀 https://t.co/iakL1e8brw&quot;</code></pre>
<pre><code>## [1] &quot;elonmusk ElemonGame Great ❤️❤️❤️ Corsair will help Elemongame the first blockchain game ever owns hundred millions users. This is far beyond my imagination. To the Moon and Mars. ElemonGame CORSAIR Elemon Corsair love ❤️❤️❤️🚀🚀🚀 &quot;</code></pre>
<p>Now, we determine the sentiment score for each tweet using library “syuzhet”, which is a custom sentiment dictionary developed in the Nebraska Literary Lab.The sentiment scores are stored in a new feature <code>sentiment_score</code>.</p>
<p>We then classify each tweet into three categories: positive(score&gt;0), neutral(socre=0), and negative(score&lt;0). We add <code>sentiment</code> as feature into our dataset to capture the sentiment category of a tweet.</p>
</div>
<div id="summary-of-added-features" class="section level2" number="3.4">
<h2><span class="header-section-number">3.4</span> Summary of added features</h2>
<p>We added 5 new features into the dataset after some processing, adding to a total of 12 features. Those new features will help us better conduct analysis and visualizations. Below is a table describing all added features.</p>
<table>
<caption><span id="tab:unnamed-chunk-19">Table 3.2: </span>Additional Feature Overview</caption>
<thead>
<tr class="header">
<th align="left">variables</th>
<th align="left">descriptions</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">original_text</td>
<td align="left">original text</td>
</tr>
<tr class="even">
<td align="left">word_tokens</td>
<td align="left">a list of word tokens</td>
</tr>
<tr class="odd">
<td align="left">cleaned_text</td>
<td align="left">text after removing special characters</td>
</tr>
<tr class="even">
<td align="left">sentiment_score</td>
<td align="left">sentiment scores</td>
</tr>
<tr class="odd">
<td align="left">sentiment</td>
<td align="left">sentiment of tweet: positive, neutral, or negative</td>
</tr>
</tbody>
</table>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-sources.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="missing-values.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/JasonSqz/ElonMuskTwitter/edit/main/03-cleaning.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/JasonSqz/ElonMuskTwitter/blob/main/03-cleaning.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
